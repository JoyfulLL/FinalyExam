STP：
初始状态都会发送BPDU，选举根桥后，仅有根桥的指定端口会
周期性发送BPDU（2S），所有非根仅在接受BPDU后才会回应，若2S内收不到根桥的消息，阻塞端口会等待max age的时间，才会依次从blocking转换为listening，learning，
forwarding。后3个状态一共有30S延迟。


STP原理：
1.在二层网络选举根桥，用于扩散BPDU报文
2.在每个非根交换机上选举根端口（用于接收BPDU）
3.在每条链路上选举一个指定端口
4.把剩下的端口阻塞掉


STP缺点：

直连故障，端口状态转换需要等待30S才可以进入forwarding状态
非直连故障需要50S的恢复时间


RSTP改进点1：增加端口角色：替代端口，备份端口
替代端口可以在根端口down掉后转化为根端口
备份端口是指定端口的备份

------------------------------------

RSTP改进点2：减少端口状态
3种端口状态，discarding，learning，forwarding
discarding：不转发用户流量也不学习MAC
learning：转发用户流量但不学习MAC
forwarding：转发用户流量又学习MAC

------------------------------------

RSTP改进点3：配置BPDU-RSTP BPDU
类型为0x02,而STP的BPDU类型为0x00
FLAG字段充分应用

------------------------------------

RSTP改进点4：配置BPDU的处理
在RSTP中，拓扑稳定后，每个设备都将按照hello time时间发送配置BPDU
更短的超时时间：若一个端口在3个hello time周期内（3*2）没有收到上游发送的BPDU则认为邻居失效

------------------------------------

改进点5：快速收敛机制
根端口快速切换：若一个根端口故障，网络中最优的替代端口将会成为根端口，直接进入forwarding状态，无需等待
指定端口快速切换：若一个指定端口故障，网络中最优的备份端口将成为指定端口，直接进入forwarding状态，无需等待

边缘端口不属于端口角色，属于一个快速收敛机制
边缘端口位于二层的边缘位置，可以将连接终端端口配置为边缘端口
边缘端口不需要进行STP计算，直接从discarding转换为forwarding,以此加快收敛速度
边缘端口一旦收到BPDU，将会失去边缘端口快速收敛的特性

P/A机制：